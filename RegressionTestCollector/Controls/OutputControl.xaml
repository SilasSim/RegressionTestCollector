<UserControl x:Class="RegressionTestCollector.Controls.OutputControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:RegressionTestCollector.Models"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             >
  <UserControl.Resources>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
  </UserControl.Resources>
  <Grid Style="{StaticResource GridStyle}"
    Visibility="{Binding IsVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <DockPanel Background="{DynamicResource Brush.SecondaryBackground}" Grid.Row="0">
      <Label Foreground="{DynamicResource Brush.ForegroundColor}" Content="Output" />


      <Button Style="{StaticResource ButtonStyle}"
        DockPanel.Dock="Right" Content="X" Padding="10 0" Background="Transparent" BorderThickness="0"
              Command="{Binding ToggleVisibilityCommand}"></Button>
      <Button Style="{StaticResource ButtonStyle}"
        DockPanel.Dock="Right" Content="Clear" VerticalAlignment="Center" Margin="30 0" Background="Transparent" BorderThickness="0"
              Command="{Binding ClearListCommand}"></Button>
      <Separator Style="{StaticResource SeparatorStyle}" >
      </Separator>
    </DockPanel>
    <ListView Style="{StaticResource ListViewStyle}" x:Name="OutputListView" Grid.Row="1" ItemsSource="{Binding OutputList}">
      <ListView.ItemTemplate>
        <DataTemplate>
          <TextBlock Text="{Binding Text}">
            <TextBlock.Style>
              <Style TargetType="TextBlock" BasedOn="{StaticResource TextBlockStyle}">
                <Setter Property="Background" Value="Transparent" />
                <Style.Triggers>
                  <DataTrigger Binding="{Binding OutputType}" Value="{x:Static local:OutputType.Error}">
                    <Setter Property="Foreground" Value="{DynamicResource Brush.Alert}" />
                  </DataTrigger>
                  <DataTrigger Binding="{Binding OutputType}" Value="{x:Static local:OutputType.Success}">
                    <Setter Property="Foreground" Value="{DynamicResource Brush.Success}" />
                  </DataTrigger>
                </Style.Triggers>
              </Style>
            </TextBlock.Style>
          </TextBlock>
        </DataTemplate>
      </ListView.ItemTemplate>
    </ListView>
  </Grid>
</UserControl>
