<UserControl x:Class="RegressionTestCollector.Controls.FilterControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:RegressionTestCollector.Controls"
             xmlns:properties="clr-namespace:RegressionTestCollector.Resources"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

  <UserControl.Resources>
    <Style x:Key="FilterItemStyle" TargetType="Grid" BasedOn="{StaticResource GridStyle}">
      <Setter Property="Margin" Value="0 5" />
      <Setter Property="HorizontalAlignment" Value="Left" />
    </Style>
  </UserControl.Resources>
  <Grid HorizontalAlignment="Stretch" Style="{StaticResource FilterItemStyle}">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <TextBlock Grid.Row="0" Style="{StaticResource TextBlockStyle}" 
               Text="{Binding Name}" Padding="0 0 0 5"></TextBlock>
    <Separator Grid.Row="1" Style="{StaticResource SeparatorStyle}" />
    <local:SearchBox Grid.Row="2" SearchString="{Binding SearchString, Mode=TwoWay}" MatchCounter="{Binding MatchCounter.MatchCounterText}" />
    <ScrollViewer Grid.Row="3" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
      <Border Style="{StaticResource BorderStyle}" BorderThickness="1" Padding="10 10 30 10" Margin="0 10">
        <Grid Style="{StaticResource GridStyle}">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
          <Grid Grid.Row="0" Style="{StaticResource FilterItemStyle}">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <CheckBox Grid.Column="0" IsChecked="{Binding FilterAllElement.IsChecked}"
                  Padding="0 0 10 0"
                Command="{Binding DataContext.FilterAllCommand, RelativeSource={RelativeSource AncestorType=UserControl}}">
            </CheckBox>
            <TextBlock Grid.Column="1" Text="{Binding FilterAllElement.Text}" />
          </Grid>
          <ItemsControl Grid.Row="1" ItemsSource="{Binding FilterSetView}">
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Grid Style="{StaticResource FilterItemStyle}">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                  </Grid.ColumnDefinitions>


                  <CheckBox Grid.Column="0" IsChecked="{Binding IsChecked}" 
                        Command="{Binding DataContext.FilterGroupCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        CommandParameter="{Binding}" Padding="0 0 10 0"></CheckBox>
                  <TextBlock Grid.Column="1" Text="{Binding Text}" />
                </Grid>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
        </Grid>
      </Border>
    </ScrollViewer>
    <Separator Grid.Row="4" Style="{StaticResource SeparatorStyle}"  />
    <Button Grid.Row="5" Style="{StaticResource ButtonStyle}" Content="{x:Static properties:SearchTableString.FilterControlClearAll}" Command="{Binding UnselectAll}" />
  </Grid>
</UserControl>
